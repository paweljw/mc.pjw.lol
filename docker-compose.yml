# Generated by setupmc.com on 2025-10-25T12:46:46.126Z

services:
  mc:
    image: itzg/minecraft-server:latest
    tty: true
    stdin_open: true
    ports:
      - "25565:25565"
    env_file:
      - .env.secrets
    environment:
      SEED: "6516483008953822161" # mystical grove at spawn! ^_^
      EULA: "TRUE"
      TYPE: "NEOFORGE"
      VERSION: "1.21.1"
      MEMORY: "6144M"
      MAX_PLAYERS: "10"
      MOTD: "poLANka v3.0"
      USE_MEOWICE_FLAGS: "true"
      FORCE_GAMEMODE: "true"
      DIFFICULTY: "0" # 0 = peaceful, 1 = easy, 2 = normal, 3 = hard
      HARDCORE: "false"
      OPS: |-
        Pabliel
      ENABLE_WHITELIST: "true"
      WHITELIST: |-
        Pabliel
      CURSEFORGE_FILES: |-
        mekanism
        mekanism-generators
        mekanism-tools
        immersive-engineering
        aquaculture
      MODRINTH_PROJECTS: |-
        create
        pams-harvestcraft-2-food-core
        pams-harvestcraft-2-food-extended
        pams-harvestcraft-2-crops
        pams-harvestcraft-2-trees
        serene-seasons
        glitchcore
        biomes-o-plenty
        terrablender
        jei
        bluemap
        create-bluemap
      MODRINTH_DOWNLOAD_DEPENDENCIES: "optional"
      MODRINTH_ALLOWED_VERSION_TYPE: "beta"
      PREVIEWS_CHAT: "true"
      ENABLE_RCON: "true"
      RCON_CMDS_STARTUP: |-
        # no inventory loss on death, no fire spread, no mob griefing, set world spawn to a safe and gorgeously beautiful location
        gamerule keepInventory true
        gamerule doFireTick false
        gamerule mobGriefing false
        setworldspawn 410 64 -101
    volumes:
      - "./data:/data"
      - "./provision/config:/config"

  caddy:
    image: caddy:2.10-alpine
    restart: unless-stopped
    cap_add:
      - NET_ADMIN
    ports:
      - "80:80"
      - "443:443"
      - "443:443/udp"
      # - "8100:8100" # local testing only
    volumes:
      - ./provision/caddy:/etc/caddy
      - caddy_data:/data
      - caddy_config:/config

volumes:
  caddy_data:
  caddy_config: